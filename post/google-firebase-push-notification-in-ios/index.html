<!DOCTYPE html>
<html lang="en"><head>
  <title>
     Google Firebase: Push notification in iOS -  Stupid Spreadsheets
  </title>
  <meta name="theme-color" content="#a3001b" />
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <meta name="description" content="" />
  <meta name="author" content="" />

  <link rel="icon" href="/images/favicon.png"/>
  <link rel="stylesheet" href="/css/main.css" />
  <link rel="preconnect" href="https://fonts.gstatic.com" />
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500&family=Ubuntu+Mono&display=swap" rel="stylesheet">
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css"
  />
</head>
<body>
    
    <header class="regular-page-header shadow round-corner">
  <div
    style="
      display: flex;
      justify-content: space-between;
      width: 98%;
      margin-bottom: 0.5em;
    "
  >
    <a class="primary-icon" href="/" aria-label="home page">
      <i class="bi bi-house-fill"></i>
    </a>

  </div>
  <div class="page-title-and-info" style="text-align: center">
    <h1 class="page-title" >
      Google Firebase: Push notification in iOS
    </h1>
    
    <p class="document-date">
      2019-02-22 &middot; 
    </p>
     
  </div>
</header>

    
    <main class="card shadow round-corner">
<div style="display: flex; justify-content: flex-end">
  <div class="share-links">
    
    <a
      class="icon active"
      href="mailto:?subject=Google%20Firebase%3a%20Push%20notification%20in%20iOS%20by%20Rose%20Nguyen&amp;body=https%3a%2f%2frosespreadsheet.com%2fpost%2fgoogle-firebase-push-notification-in-ios%2f"
      target="_self"
      rel="noopener"
      aria-label="share by email"
      ><i class="bi bi-envelope-fill"></i
    ></a>
    <a
      class="icon active"
      href="https://twitter.com/intent/tweet/?text=Google%20Firebase%3a%20Push%20notification%20in%20iOS%20by%20%3cnil%3e&amp;url=https%3a%2f%2frosespreadsheet.com%2fpost%2fgoogle-firebase-push-notification-in-ios%2f"
      target="_blank"
      rel="noopener"
      aria-label="share on twitter"
      ><i class="bi bi-twitter"></i
    ></a>
    <a
      class="icon active"
      href="https://www.linkedin.com/sharing/share-offsite/?url=https%3a%2f%2frosespreadsheet.com%2fpost%2fgoogle-firebase-push-notification-in-ios%2f"
      target="_blank"
      rel="noopener"
      aria-label="share on twitter"
      ><i class="bi bi-linkedin"></i
    ></a>
  </div>
</div>

<h2 id="1-introduction">1. Introduction</h2>
<p>Push Notifications is a loud and powerful way for our apps to engage with our users. We engage with our users by letting them see values with their very owns eyes. Users see values. Users engage. We can engage our users by letting them know about something important. Perhaps their favorite sport team is about to compete. A flash sale on watermelons is on for 30 minutes. Or there is an important meet up in the desert later this weekend. These are some scenarios when our users may want to be notified.</p>
<p>One way to implement push notifications for iOS apps is through Firebase Notifications.</p>
<h2 id="2-integrate-google-firebase-into-project">2. Integrate Google Firebase into project</h2>
<p>Google Firebase is general, it includes analytic, crashlytic, cloud messaging (push notification)&hellip;</p>
<p>Step 1: Open Firebase console link <a href="https://console.firebase.google.com">https://console.firebase.google.com</a><br>
Step 2: Create new project or select an existing one.<br>
Note: Above-project is Firebase project, it can include many different applications (iOS apps, Android apps, web, unity game&hellip;)<br>
Step 3: Select add app -&gt; select iOS<br>
<img src="/images/img_0006_1.png" alt="alt">
<img src="/images/img_0006_2.png" alt="alt">
Step 4: It will open a dialog like below. Copy bundle ID from iOS project and then put it here -&gt; Click <strong>Register app</strong>. Then follow all remaining steps from this page. Remember that when add pod, we should add both Analytics and Messaging. Messaging we use to push notification and Analytics should be used in all applications.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Swift" data-lang="Swift">pod <span style="color:#960050;background-color:#1e0010">&#39;</span>Firebase<span style="color:#f92672">/</span>Analytics<span style="color:#960050;background-color:#1e0010">&#39;</span>    
pod <span style="color:#960050;background-color:#1e0010">&#39;</span>Firebase<span style="color:#f92672">/</span>Messaging<span style="color:#960050;background-color:#1e0010">&#39;</span>
</code></pre></div><p><img src="/images/img_0006_3.png" alt="alt">
The loading to verify might take until a minute.</p>
<h2 id="3-get-apns-authentication-key-from-apple">3. Get APNs authentication key from Apple.</h2>
<p>APNs is stands for Apple Push Notification service. Firebase need to use APNs authenticate key to have permission to send message to iOS app, the application identified by App ID.</p>
<h3 id="a-create-app-id">a. Create App ID</h3>
<p>Step 1: Go to Apple Developer Member Center link <a href="https://developer.apple.com/membercenter/index.action">https://developer.apple.com/membercenter/index.action</a> -&gt; login<br>
Step 2: Navigate to <strong>Certificates, Identifiers and Profiles</strong>.
Note: if you don&rsquo;t see <strong>Certificates, Identifiers and Profiles</strong>, please check your role, if your role is Developer, you cannot see it.
More detail from Apple Developer Program Roles link <a href="https://developer.apple.com/support/roles/">https://developer.apple.com/support/roles/</a>
If you are in organization and your role is Admin or above, you will see.
If your account is personal one, you can also do this.
<img src="/images/img_0006_4.png" alt="alt">
Step 3: Go to <strong>Identifiers</strong> and select plus button to create new App IDs.
<img src="/images/img_0006_5.png" alt="alt">
Step 4: Select create new App Ids -&gt; enter Bundle ID from Xcode project -&gt; tick on Push Notification in Capabilities</p>
<h3 id="b-create-apns-key-p8-file">b. Create APNs key (.p8 file)</h3>
<p>Step 1: Go to Keys in <strong>Certificates, Identifiers and Profiles</strong> -&gt; Create new key
<img src="/images/img_0006_8.png" alt="alt">
Step 2: Go to Console Firebase -&gt; Project Overview -&gt; Project Setting -&gt; Choose Cloud Messaging tab
<img src="/images/img_0006_9.png" alt="alt">
Step 3: Upload .p8 file.
Key ID - Appear after create .p8 file
Team ID - Go to Appdle Developer center -&gt; Membership</p>
<h2 id="4-config-in-project">4. Config in project</h2>
<p>Step 1: Go to GoogleService-Info.plist -&gt; Copy value of key <em>REVERSED_CLIENT_ID</em> -&gt; Go to Project Info -&gt; Create URL Type and put value inside.
<img src="/images/img_0006_7.png" alt="alt">
Step 2: Go to Signing &amp; Capabilities -&gt; Add Push Notification and Backgroud Modes to Capabilities -&gt; Tick Remote notifications and Background processing in Background Modes</p>
<h2 id="5-source-code">5. Source code</h2>
<p>Put code below to AppDelegate.swift</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-Swift" data-lang="Swift"><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">UIKit</span>
<span style="color:#66d9ef">import</span> <span style="color:#a6e22e">Firebase</span>

<span style="color:#66d9ef">@UIApplicationMain</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AppDelegate</span>: UIResponder, UIApplicationDelegate {
    <span style="color:#66d9ef">let</span> gcmMessageIDKey = <span style="color:#e6db74">&#34;gcm.message_id&#34;</span>
        
    <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">init</span>() {
        <span style="color:#66d9ef">super</span>.<span style="color:#66d9ef">init</span>()
        FirebaseApp.configure() <span style="color:#75715e">// put here better than in didFinishLaunchingWithOptions</span>
    }

    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">application</span>(<span style="color:#66d9ef">_</span> application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -&gt; Bool {
        Messaging.messaging().delegate = <span style="color:#66d9ef">self</span>
        application.registerForRemoteNotifications()
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>
    }
    
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">application</span>(<span style="color:#66d9ef">_</span> application: UIApplication, didReceiveRemoteNotification userInfo: [AnyHashable : Any]) {
        <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> messageID = userInfo[gcmMessageIDKey] {
          print(<span style="color:#e6db74">&#34;Message ID: </span><span style="color:#e6db74">\(</span>messageID<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
        }
        print(userInfo)
    }
    
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">application</span>(<span style="color:#66d9ef">_</span> application: UIApplication, didReceiveRemoteNotification userInfo: [AnyHashable : Any], fetchCompletionHandler completionHandler: @escaping (UIBackgroundFetchResult) -&gt; Void) {
        <span style="color:#66d9ef">if</span> <span style="color:#66d9ef">let</span> messageID = userInfo[gcmMessageIDKey] {
          print(<span style="color:#e6db74">&#34;Message ID: </span><span style="color:#e6db74">\(</span>messageID<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
        }
        print(userInfo)
        completionHandler(UIBackgroundFetchResult.newData)
    }
}

<span style="color:#66d9ef">extension</span> <span style="color:#a6e22e">AppDelegate</span>: MessagingDelegate {
    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">messaging</span>(<span style="color:#66d9ef">_</span> messaging: Messaging, didReceiveRegistrationToken fcmToken: String) {
        print(<span style="color:#e6db74">&#34;Firebase registration token: </span><span style="color:#e6db74">\(</span>fcmToken<span style="color:#e6db74">)</span><span style="color:#e6db74">&#34;</span>)
        <span style="color:#66d9ef">let</span> dataDict:[String: String] = [<span style="color:#e6db74">&#34;token&#34;</span>: fcmToken]
        NotificationCenter.<span style="color:#66d9ef">default</span>.post(name: Notification.Name(<span style="color:#e6db74">&#34;FCMToken&#34;</span>), object: <span style="color:#66d9ef">nil</span>, userInfo: dataDict)
    }

    <span style="color:#66d9ef">func</span> <span style="color:#a6e22e">messaging</span>(<span style="color:#66d9ef">_</span> messaging: Messaging, didReceive remoteMessage: MessagingRemoteMessage) {
        print(<span style="color:#e6db74">&#34;Message Data&#34;</span>, remoteMessage.appData)
    }
}
</code></pre></div><h2 id="6-test-it">6. Test it</h2>
<p>Go to Firebase Console -&gt; Grow -&gt; Cloud Messaging</p>


    </main><footer>
  
  
  
  
  <div class="prev-next"></div>
  
  <div class="footer shadow round-corner">
    
    <div class="grid-container">
      <div class="footer-recent-posts">
        <h6>Recent Posts</h6>
        <ol>
          
          <li><a href="https://rosespreadsheet.com/post/google-firebase-push-notification-in-ios/">Google Firebase: Push notification in iOS</a></li>
          
        </ol>
        <a href="/post">...ALL POSTS</a>
        <hr class="mobile white-hr" />
      </div>
      <div>
        <h6>Sections</h6>
<div class="section-container">
  
  
  <a class="section" href="https://rosespreadsheet.com/post/" aria-label="site sections"
    >Posts</a
  >
  
  
</div>

        









<h6>
  Tags
</h6>

<div class="taxa-container">
  
  
    <a class="taxa" href="https://rosespreadsheet.com/tags/firebase/">firebase</a>
  
  
    <a class="taxa" href="https://rosespreadsheet.com/tags/ios/">ios</a>
  
  
    <a class="taxa" href="https://rosespreadsheet.com/tags/push-notification/">push notification</a>
  
</div>


<h6>
  Categories
</h6>

<div class="taxa-container">
  
  
    <a class="taxa" href="https://rosespreadsheet.com/categories/ios/">ios</a>
  
</div>


        <hr class="mobile white-hr" />
      </div>
    </div>
    
    <div class="footer-info-text">
      <p>
        <a href="mailto:rosemhuyen@gmail.com" class="bi bi-envelope-fill" style="margin: 0px 10px"></a>
        <a href="https://www.facebook.com/rosemhuyen" class="bi bi-facebook" style="margin: 0px 10px"></a>
        <a href="https://www.linkedin.com/in/rosemhuyen/" class="bi bi-linkedin" style="margin: 0px 10px"></a>
      </p>
      <p>
        <span>&copy;</span>
        <span>2023</span>
        <span>Rose Nguyen</span>
      </p>
    </div>
    <div style="text-align: right; margin-bottom: 0.25em; font-size: 1.2em">
      <a class="primary-icon to-top" href="#" aria-label="navigate to top">
        <i class="bi bi-arrow-up-circle-fill"></i>
      </a>
    </div>
  </div>
</footer>
</body>
</html>
